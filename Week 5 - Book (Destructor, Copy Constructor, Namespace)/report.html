<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="Submission" content="/tmp/codecheck/17100521534206930822548468494/submission"/>
<meta name="Problem" content="17093021036ojjx46vmor05k6wbx2y3qnn"/>
<meta name="Level" content="1"/>
<meta name="Time" content="2017-10-05T21:53:39Z"/>
<meta name="ID" content="Book"/>
<meta name="Elapsed" content="10533 ms"/>
<style type="text/css">
.header {font-weight: bold; font-size: 1.2em; }
.item {font-weight: bold;}
.pass {color: green;}
.fail {color: red;}
.note {color: blue; font-weight: bold;}
table.file td {padding-right: 1em; background: #FFF; }
.linenumber {color: gray;}
.footnote {font-size: 0.7em;}
table {font-size: 0.9em;}
td, th { background: #EEE; margin: 0.5em; padding: 0.25em;}
table.output td {vertical-align: top;}
div.footnotes { border-top: 1px solid gray; padding-top: 0.5em; }
</style>
<title>Report</title>
</head>
<body>
<p class="header run">Testing BookApp.cpp</p>
<div class="run">
<pre class="output">
</pre>
<pre class="output">
+ Inserted at index 0: Book{ISBN=978-0130460417, last=Mak, first=Ronald, title=Java Number Cruncher, category=technical}

+ Inserted at index 1: Book{ISBN=978-1501163401, last=King, first=Stephen, title=Sleeping Beauties, category=fiction}

+ Inserted at index 1: Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++, category=technical}

+ Inserted at index 1: Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers, category=technical}

+ Inserted at index 3: Book{ISBN=978-0471744870, last=Horstmann, first=Cay, title=Object-Oriented Design, category=technical}

+ Inserted at index 4: Book{ISBN=978-1439156810, last=King, first=Stephen, title=On Writing - A Memoir of the Craft, category=history}

? All books in the catalog:
Book{ISBN=978-0130460417, last=Mak, first=Ronald, title=Java Number Cruncher, category=technical}
Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers, category=technical}
Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++, category=technical}
Book{ISBN=978-0471744870, last=Horstmann, first=Cay, title=Object-Oriented Design, category=technical}
Book{ISBN=978-1439156810, last=King, first=Stephen, title=On Writing - A Memoir of the Craft, category=history}
Book{ISBN=978-1501163401, last=King, first=Stephen, title=Sleeping Beauties, category=fiction}

? Books by author Mak:
Book{ISBN=978-0130460417, last=Mak, first=Ronald, title=Java Number Cruncher, category=technical}
Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers, category=technical}

? Books in category technical:
Book{ISBN=978-0130460417, last=Mak, first=Ronald, title=Java Number Cruncher, category=technical}
Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers, category=technical}
Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++, category=technical}
Book{ISBN=978-0471744870, last=Horstmann, first=Cay, title=Object-Oriented Design, category=technical}

? Books in category fiction:
Book{ISBN=978-1501163401, last=King, first=Stephen, title=Sleeping Beauties, category=fiction}

? Book with ISBN 978-0470383285:
Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++, category=technical}

+ Inserted at index 1: Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers, category=technical}
*** Duplicate ISDN ***

? Books in category history:
Book{ISBN=978-1439156810, last=King, first=Stephen, title=On Writing - A Memoir of the Craft, category=history}

? Books by author King:
Book{ISBN=978-1439156810, last=King, first=Stephen, title=On Writing - A Memoir of the Craft, category=history}
Book{ISBN=978-1501163401, last=King, first=Stephen, title=Sleeping Beauties, category=fiction}

? Book with ISBN 978-0470385285:

? Books by author Horstmann:
Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++, category=technical}
Book{ISBN=978-0471744870, last=Horstmann, first=Cay, title=Object-Oriented Design, category=technical}

- Removed Book{ISBN=978-0130460417, last=Mak, first=Ronald, title=Java Number Cruncher, category=technical}

$ *** Invalid command ***

- Removed Book{ISBN=978-0471744870, last=Horstmann, first=Cay, title=Object-Oriented Design, category=technical}

- Removed Book{ISBN=978-1439156811, last=, first=, title=, category=none}
*** Book not found ***

? All books in the catalog:
Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers, category=technical}
Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++, category=technical}
Book{ISBN=978-1439156810, last=King, first=Stephen, title=On Writing - A Memoir of the Craft, category=history}
Book{ISBN=978-1501163401, last=King, first=Stephen, title=Sleeping Beauties, category=fiction}</pre>
<span class="pass">pass </span></div>
<p class="header studentFiles">Student files</p>
<div class="studentFiles">
<p class="caption">Book.cpp:</p>
<pre>#include "Book.h"

using namespace std;

/***** Complete this file. *****/

/**
 * Default Constructor to initialize all the elements in the book class
 */
 Book::Book():isbn(""), last(""), first(""), title(""), category()
 {
 }

/**
 * Constructor to initialize the elements in the book class with given values
 */
Book::Book(string isbn, string last, string first, string title, Category category):isbn(isbn), last(last), first(first), title(title), category(category)
{
}

/**
 * Default Destructor
 */
Book::~Book()
{
   
}

/**
 * Setter functions to set the values of the elements in the book class
 */
void Book::set_isbn(string isbn)
{
   this-&gt;isbn = isbn;
}
void Book::set_last(string last)
{
   this-&gt;last = last;
   
}
void Book::set_first(string first)
{
   this-&gt;first = first;
}
void Book::set_title(string title)
{
   this-&gt;title = title;
}
void Book::set_category(string&amp; category1)
{
   if(category1 == "technical")
   {
      this-&gt;category = Category::TECHNICAL;
   }
   else if(category1 == "fiction")
   {
      this-&gt;category = Category::FICTION;
   }
   else if(category1 == "history")
   {
      this-&gt;category = Category::HISTORY;
   }
   else
      this-&gt;category = Category::NONE;
}

/**
 * Getter functions to get the values of the elements in the book class
 */ 
string Book::get_isbn()
{
   return isbn;
}
string Book::get_isbn1() const
{
   return isbn;
}
string Book::get_last()
{
   return last;
}
string Book::get_first()
{
   return first;
}
string Book::get_title()
{
   return title;
}
string Book::get_category()
{
   if(category == Category::TECHNICAL)
   {
      return "technical";
   }
   else if(category == Category::FICTION)
   {
      return "fiction";
   }
   else if(category == Category::HISTORY)
   {
      return "history";
   }
   else if (category == Category::NONE)
   {
      return "none";
   }
}
</pre>
<p class="caption">Book.h:</p>
<pre>#ifndef BOOK_H_
#define BOOK_H_

#include &lt;string&gt;
using namespace std;

/***** Complete this file. *****/

/**
 * The Book class.
 */
class Book
{
public:
    /**
     * Book categories.
     */
    enum class Category { FICTION, HISTORY, TECHNICAL, NONE };

    /**
     * Default constructor.
     */
    Book();

    /**
     * Constructor.
     */
    Book(string isbn, string last, string first, string title, Category category);

    /**
     * Destructor.
     */
    ~Book();
    
    /***** Complete the public members. *****/
    /**
     * Defining the accessor functions
     */
    void set_isbn(string isbn);
    void set_last(string last);
    void set_first(string first);
    void set_title(string title);
    void set_category(string&amp; category);
    
    string get_isbn();
    string get_isbn1() const;
    string get_last();
    string get_first();
    string get_title();
    string get_category();
    
    /**
     * Defining the friend functions for operator overloading
     */
    friend istream&amp; operator &gt;&gt;(istream&amp; ins, Book&amp; b);
    friend ostream&amp; operator &gt;&gt;(ostream&amp; outs, Book&amp; b);

private:
    
    /***** Complete the private members. *****/
    string isbn, last, first, title;
    Category category;
};

#endif /* EMPLOYEE_H_ */
</pre>
<p class="caption">BookApp.cpp:</p>
<pre>/**
 * Defining the includes
 */
#include "Book.h"
#include &lt;iostream&gt;
#include &lt;vector&gt;
#include &lt;fstream&gt;
#include &lt;sstream&gt;

/***** Complete this file. *****/

using namespace std;

// Status codes.
enum class StatusCode {OK, DUPLICATE, NOT_FOUND, INVALID_COMMAND};

/**
 * Find the book in the catalog with the given ISBN.
 * Use a binary search.
 * @param isbn the ISBN.
 * @param catalog the vector of book records.
 * @return the vector index of the book if found, else return -1.
 */
int find(const string isbn, const vector&lt;Book&gt;&amp; catalog);
/**
 * Defining the functions
 */
 
/**
 * Read the input file to create a book catalog.
 * @param command to perform a task on the input in the file.
 * @param catalog the vector of book records.
 * @param input the input stream of data in the file.
 */
void file_input(char command, vector&lt;Book&gt;&amp; catalog, ifstream&amp; input);

/**
 * Compare the string with isbn to find if the book is already added in the catalog.
 * @param temp_string the isbn to search in the catalog.
 * @param catalog the vector of book records.
 * @return true if the book with given isbn is already there.
 */
bool check_book_or_not(string temp_string, vector&lt;Book&gt;&amp; catalog);

/**
 * Add the new book with its details in the book catalog.
 * @param temp_book the details of the book to be added in the catalog.
 * @param catalog the vector of book records.
 * @param command to perform a task on the input in the file.
 */
void add_book(Book temp_book, vector&lt;Book&gt;&amp; catalog, char command);

/**
 * Delete the book from the book catalog.
 * @param temp_string the details of the book to be added in the catalog.
 * @param catalog the vector of book records.
 * @param command to perform a task on the input in the file.
 */
void delete_book(string temp_string, vector&lt;Book&gt;&amp; catalog, char command);

/**
 * Print all the books in the book catalog.
 * @param catalog the vector of book records.
 */
void print_all(vector&lt;Book&gt;&amp; catalog);

/**
 * Print the books for a certain author from the book catalog.
 * @param catalog the vector of book records.
 * @param temp the details of author of the book to be printed.
 */
void print_author(vector&lt;Book&gt;&amp; catalog, string temp);

/**
 * Print the books for a certain category from the book catalog.
 * @param catalog the vector of book records.
 * @param temp the details of category of the book to be printed.
 */
void print_category(vector&lt;Book&gt;&amp; catalog, string temp);

/**
 * Print the book with the given isbn from the book catalog.
 * @param catalog the vector of book records.
 * @param temp the details of the isbn of the book to be printed.
 */
void print_isbn(vector&lt;Book&gt;&amp; catalog, string temp);

const string INPUT_FILE_NAME = "commands.in";

/**
 * The main. Open the command input file and loop to process commands.
 */
int main()
{
    // Open the input file.
    ifstream input;
    input.open(INPUT_FILE_NAME);
    if (input.fail())
    {
        cout &lt;&lt; "Failed to open " &lt;&lt; INPUT_FILE_NAME &lt;&lt; endl;
        return -1;
    }

    vector&lt;Book&gt; catalog;  // book catalog

    char command;
    input &gt;&gt; command;  // read the first command

    /**
     * Loop to read commands until the end of file.
     */
    while (!input.fail())
    {
        //cout &lt;&lt; endl &lt;&lt; command &lt;&lt; " ";

        /*** Complete this main. *****/
        file_input(command, catalog, input);
        input &gt;&gt; command;
    }
    input.close();
    return 0;
}

/**
 * Function to overload the input operator.
 */
istream&amp; operator &gt;&gt;(istream&amp; ins, Book&amp; b)
{
   string isbn, last, first, title, category, str;
   
   getline (ins, isbn, ',');
   getline (ins, last, ',');
   getline (ins, first, ',');
   getline (ins, title, ',');
   getline (ins, category);
   
   b.set_isbn(isbn);
   b.set_last(last);
   b.set_first(first);
   b.set_title(title);
   b.set_category(category);
   
   return ins;
}

/**
 * Function to overload the output operator.
 */
ostream&amp; operator &lt;&lt;(ostream&amp; outs, Book&amp; b)
{
   outs &lt;&lt; "Book{ISBN=" &lt;&lt; b.get_isbn() &lt;&lt; ", last=" &lt;&lt; b.get_last() &lt;&lt; ", first=" &lt;&lt; b.get_first() &lt;&lt; ", title=" &lt;&lt; b.get_title() &lt;&lt; ", category=" &lt;&lt; b.get_category() &lt;&lt; "}";
   return outs;
}

/**
 * Read the input file to create a book catalog.
 */
void file_input(char command, vector&lt;Book&gt;&amp; catalog, ifstream&amp; input)
{
   Book temp_book;
   string temp_string;
   bool check = true;

   switch(command)
   {
      case '+':
         {
            input &gt;&gt; ws;
            input &gt;&gt; temp_book;
            check = check_book_or_not(temp_book.get_isbn(), catalog);
            if(check == true)
            {
               int i, position = 0;
               cout &lt;&lt; endl;
               for(i = 1; i &lt; catalog.size(); i++)
               {
                  if (temp_book.get_isbn() &gt; catalog[i].get_isbn())
                  {
                     position = i;
                  }
                  else
                     break;
               }
               
               cout &lt;&lt; endl &lt;&lt; command &lt;&lt; " " &lt;&lt; "Inserted at index " &lt;&lt; position+1 &lt;&lt; ": "  &lt;&lt; temp_book;
               
               cout &lt;&lt; endl &lt;&lt; "*** Duplicate ISDN ***";
            }
            else
               add_book(temp_book, catalog, command);
            break;
         }
      case '-':
         {
            input &gt;&gt; ws &gt;&gt; temp_string;
            if (temp_string.substr(0,3) == "978")
            {
               check = check_book_or_not(temp_string, catalog);
               if(check == false)
               {
                  cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; "- Removed Book{ISBN=" &lt;&lt; temp_string &lt;&lt; ", last=, first=, title=, category=none}";
                  cout &lt;&lt; endl &lt;&lt; "*** Book not found ***" &lt;&lt; endl;
               }
               else
                  delete_book(temp_string, catalog, command);
            }
            break;
         }
      case '?':
         {
            string temp;
            getline(input, temp);
            if(temp.size()==0)
            {
               print_all(catalog);
            }
            else
            {
               string temp2;
               istringstream in(temp);
               getline(in, temp2, '=');
               if (temp2.substr(1) == "author")
               {
                  print_author(catalog, temp);
               }
               else if (temp2.substr(1) == "category")
               {
                  print_category(catalog, temp);
               }
               else if (temp2.substr(1) == "isbn")
               {
                  print_isbn(catalog, temp);
               }
            }
               
            break;
         }
      case '$':
         {
            cout&lt;&lt; endl &lt;&lt; endl &lt;&lt; "$ *** Invalid command ***";
            break;
         }
      default:
      {
         //do nothing
      }
   }
}

/**
 * Add the new book with its details in the book catalog.
 */
void add_book(Book temp_book, vector&lt;Book&gt;&amp; catalog, char command)
{
   int position = 0;
   int i;
   if (catalog.empty())
   {
      catalog.push_back(temp_book);
      cout &lt;&lt; endl &lt;&lt; command &lt;&lt; " " &lt;&lt; "Inserted at index 0: "  &lt;&lt; temp_book &lt;&lt; endl;
      
      return;
   }
   
   for(i = 1; i &lt; catalog.size(); i++)
   {
      if (temp_book.get_isbn() &gt; catalog[i].get_isbn())
      {
         position = i;
      }
      else
         break;
   }
   
   
   if(position == catalog.size()-1)
   {
      catalog.push_back(temp_book);
   }
   else
   {
      catalog.insert(catalog.begin() + position+1, temp_book);
   }
   
   cout &lt;&lt; endl &lt;&lt; command &lt;&lt; " " &lt;&lt; "Inserted at index " &lt;&lt; position+1 &lt;&lt; ": "  &lt;&lt; temp_book &lt;&lt; endl;
}

/**
 * Delete the book in the book catalog.
 */
void delete_book(string temp_string, vector&lt;Book&gt;&amp; catalog, char command)
{
   int position;
   int i;
   for(i = 0; i &lt; catalog.size(); i++)
   {
      if(catalog[i].get_isbn() == temp_string)
      {
         position = i;
         break;
      }
   }
   
   cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; command &lt;&lt; " Removed " &lt;&lt; catalog[i];
   
   if(i == catalog.size())
   {
   }
   else
   {
      catalog.erase(catalog.begin() + position);   
   }
}

/**
 * Compare the string with isbn to find if the book is already added in the catalog.
 */
bool check_book_or_not(string temp_string, vector&lt;Book&gt;&amp; catalog)
{
   int i;
   bool temp = true;
   for(i = 0; i &lt; catalog.size(); i++)
   {
      if(catalog[i].get_isbn() == temp_string)
      {
         temp = true;
         return temp;
      }
   }
   return false;
}

/**
 * Print all the books from the book catalog.
 */
void print_all(vector&lt;Book&gt;&amp; catalog)
{
   cout &lt;&lt; endl &lt;&lt; "? All books in the catalog:";
   for (int i = 0; i &lt; catalog.size(); i++)
   {
      cout &lt;&lt; endl &lt;&lt; catalog[i];
   }
}

/**
 * Print the book with the given author from the book catalog.
 * Using linear search.
 */
void print_author(vector&lt;Book&gt;&amp; catalog, string temp)
{
   int i;
   cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; "? Books by author " &lt;&lt; temp.substr(8) &lt;&lt; ":";
   
   // Implemeting linear search to find the books with given author
   for(i = 0; i &lt; catalog.size(); i++)
   {
      if(temp.substr(8) == catalog[i].get_last())
      {
         cout &lt;&lt; endl &lt;&lt; catalog[i];
      }
   }
}

/**
 * Print the book with the given category from the book catalog.
 * Using linear search.
 */
void print_category(vector&lt;Book&gt;&amp; catalog, string temp)
{
   int i;
   cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; "? Books in category " &lt;&lt; temp.substr(10) &lt;&lt; ":";
   
   // Implemeting linear search to find the books with given category
   for(i = 0; i &lt; catalog.size(); i++)
   {
      if(temp.substr(10) == catalog[i].get_category())
      {
         cout &lt;&lt; endl &lt;&lt; catalog[i];
      }
   }
}

/**
 * Print the book with the given isbn from the book catalog.
 */
void print_isbn(vector&lt;Book&gt;&amp; catalog, string temp)
{
   int i = 0;
   cout &lt;&lt; endl &lt;&lt; endl &lt;&lt; "? Book with ISBN " &lt;&lt; temp.substr(6) &lt;&lt; ":";
   
   i = find(temp.substr(6), catalog);
   
   if(i &gt; 0)
   {
      cout &lt;&lt; endl &lt;&lt; catalog[i];
   }
}

/**
 * Find the book in the catalog with the given ISBN.
 * Using a binary search.
 */
int find(const string isbn, const vector&lt;Book&gt;&amp; catalog)
{
   int low = 1, high = catalog.size(), mid;

   mid = (catalog.size() + 1) / 2;
   
   // Implemeting binary search to find the book with given isbn
   while(low &lt;= high)
   {
      if(isbn &gt; catalog[mid].get_isbn1())
      {
         low = mid + 1;
      }
      else if (isbn &lt; catalog[mid].get_isbn1())
      {
         high = mid - 1;
      }
      
      mid = (low + high) / 2;
      if (isbn == catalog[mid].get_isbn1())
      {
         return mid;
      }
   }
   
   return -1;
}
</pre>
</div>
<p class="header providedFiles">Provided files</p>
<div class="providedFiles">
<p class="caption">commands.in:</p>
<pre>+ 978-0130460417,Mak,Ronald,Java Number Cruncher,technical
+ 978-1501163401,King,Stephen,Sleeping Beauties,fiction
+ 978-0470383285,Horstmann,Cay,Big C++,technical
+ 978-0470177075,Mak,Ronald,Writing Compilers,technical
+ 978-0471744870,Horstmann,Cay,Object-Oriented Design,technical
+ 978-1439156810,King,Stephen,On Writing - A Memoir of the Craft,history
?
? author=Mak
? category=technical
? category=fiction
? isbn=978-0470383285
+ 978-0470177075,Mak,Ronald,Writing Compilers,technical
? category=history
? author=King
? isbn=978-0470385285
? author=Horstmann
- 978-0130460417
$ 978-1439156810
- 978-0471744870
- 978-1439156811
?
</pre>
</div>
<p class="header score">Score</p>
<div class="score">
<p class="score">1/1</p>
</div>
<div class="footnotes"><div class="footnote">2017-10-05T21:53:39Z</div>
</div>
</body></html>
